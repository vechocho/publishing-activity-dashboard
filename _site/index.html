<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Actividad de Publicación de Biodiversidad de Ecuador – node-stats</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-dashboard/quarto-dashboard.js"></script>
<script src="site_libs/quarto-dashboard/stickythead.js"></script>



<script src="site_libs/quarto-dashboard/web-components.js" type="module"></script>
<script src="site_libs/quarto-dashboard/components.js"></script>

<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="quarto-dashboard fullcontent quarto-light">

<header id="quarto-dashboard-header">
<nav class="navbar navbar-expand-md slim" data-bs-theme="dark">
  <div class="navbar-container container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-controls="dashboard-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>    


    <div class="navbar-brand-container">


      <div class="navbar-title">
        <div class="navbar-title-text"><a href="#">Actividad de Publicación de Biodiversidad de Ecuador</a></div>
        
        
      </div>
    </div>
<div id="dashboard-collapse" class="navbar-collapse collapse"><ul class="navbar-nav navbar-nav-scroll me-auto" role="tablist"><li class="nav-item" role="presentation"><a id="tab-bloque-de-configuración" class="nav-link active" data-bs-toggle="tab" role="tab" data-bs-target="#bloque-de-configuración" data-scrolling="true" href="#bloque-de-configuración" aria-controls="bloque-de-configuración" aria-selected="true"><span class="nav-link-text">— BLOQUE DE CONFIGURACIÓN —</span></a></li><li class="nav-item" role="presentation"><a id="tab-setup-chunk" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#setup-chunk" data-scrolling="true" href="#setup-chunk" aria-controls="setup-chunk" aria-selected="false"><span class="nav-link-text">— SETUP CHUNK —</span></a></li><li class="nav-item" role="presentation"><a id="tab-carga-de-todas-las-librerías-de-r-necesarias." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#carga-de-todas-las-librerías-de-r-necesarias." data-scrolling="true" href="#carga-de-todas-las-librerías-de-r-necesarias." aria-controls="carga-de-todas-las-librerías-de-r-necesarias." aria-selected="false"><span class="nav-link-text">Carga de todas las librerías de R necesarias.</span></a></li><li class="nav-item" role="presentation"><a id="tab-load-all-necessary-r-libraries." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#load-all-necessary-r-libraries." data-scrolling="true" href="#load-all-necessary-r-libraries." aria-controls="load-all-necessary-r-libraries." aria-selected="false"><span class="nav-link-text">Load all necessary R libraries.</span></a></li><li class="nav-item" role="presentation"><a id="tab-include-false-significa-que-este-bloque-no-se-mostrará-en-la-web." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#include-false-significa-que-este-bloque-no-se-mostrará-en-la-web." data-scrolling="true" href="#include-false-significa-que-este-bloque-no-se-mostrará-en-la-web." aria-controls="include-false-significa-que-este-bloque-no-se-mostrará-en-la-web." aria-selected="false"><span class="nav-link-text">‘include = FALSE’ significa que este bloque no se mostrará en la web.</span></a></li><li class="nav-item" role="presentation"><a id="tab-include-false-means-this-chunk-will-not-be-shown-on-the-website." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#include-false-means-this-chunk-will-not-be-shown-on-the-website." data-scrolling="true" href="#include-false-means-this-chunk-will-not-be-shown-on-the-website." aria-controls="include-false-means-this-chunk-will-not-be-shown-on-the-website." aria-selected="false"><span class="nav-link-text">‘include = FALSE’ means this chunk will not be shown on the website.</span></a></li><li class="nav-item" role="presentation"><a id="tab-carga-la-función-de-ayuda-get_created_modified-desde-el-archivo-rhelpers.r" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#carga-la-función-de-ayuda-get_created_modified-desde-el-archivo-rhelpers.r" data-scrolling="true" href="#carga-la-función-de-ayuda-get_created_modified-desde-el-archivo-rhelpers.r" aria-controls="carga-la-función-de-ayuda-get_created_modified-desde-el-archivo-rhelpers.r" aria-selected="false"><span class="nav-link-text">Carga la función de ayuda ‘get_created_modified’ desde el archivo R/helpers.R</span></a></li><li class="nav-item" role="presentation"><a id="tab-load-the-helper-function-get_created_modified-from-the-rhelpers.r-file" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#load-the-helper-function-get_created_modified-from-the-rhelpers.r-file" data-scrolling="true" href="#load-the-helper-function-get_created_modified-from-the-rhelpers.r-file" aria-controls="load-the-helper-function-get_created_modified-from-the-rhelpers.r-file" aria-selected="false"><span class="nav-link-text">Load the helper function ‘get_created_modified’ from the R/helpers.R file</span></a></li><li class="nav-item" role="presentation"><a id="tab-carga-de-datos-de-datasets" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#carga-de-datos-de-datasets" data-scrolling="true" href="#carga-de-datos-de-datasets" aria-controls="carga-de-datos-de-datasets" aria-selected="false"><span class="nav-link-text">— CARGA DE DATOS DE DATASETS —</span></a></li><li class="nav-item" role="presentation"><a id="tab-dataset-data-loading" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#dataset-data-loading" data-scrolling="true" href="#dataset-data-loading" aria-controls="dataset-data-loading" aria-selected="false"><span class="nav-link-text">— DATASET DATA LOADING —</span></a></li><li class="nav-item" role="presentation"><a id="tab-obtener-todas-las-datasetkey-ids-de-datasets-que-tienen-registros-en-ecuador." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#obtener-todas-las-datasetkey-ids-de-datasets-que-tienen-registros-en-ecuador." data-scrolling="true" href="#obtener-todas-las-datasetkey-ids-de-datasets-que-tienen-registros-en-ecuador." aria-controls="obtener-todas-las-datasetkey-ids-de-datasets-que-tienen-registros-en-ecuador." aria-selected="false"><span class="nav-link-text">1. Obtener todas las ‘datasetKey’ (IDs de datasets) que tienen registros en Ecuador.</span></a></li><li class="nav-item" role="presentation"><a id="tab-get-all-datasetkey-dataset-ids-that-have-records-in-ecuador." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#get-all-datasetkey-dataset-ids-that-have-records-in-ecuador." data-scrolling="true" href="#get-all-datasetkey-dataset-ids-that-have-records-in-ecuador." aria-controls="get-all-datasetkey-dataset-ids-that-have-records-in-ecuador." aria-selected="false"><span class="nav-link-text">1. Get all ‘datasetKey’ (dataset IDs) that have records in Ecuador.</span></a></li><li class="nav-item" role="presentation"><a id="tab-usamos-occ_search-para-buscar-en-gbif." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#usamos-occ_search-para-buscar-en-gbif." data-scrolling="true" href="#usamos-occ_search-para-buscar-en-gbif." aria-controls="usamos-occ_search-para-buscar-en-gbif." aria-selected="false"><span class="nav-link-text">Usamos occ_search() para buscar en GBIF.</span></a></li><li class="nav-item" role="presentation"><a id="tab-we-use-occ_search-to-query-gbif." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#we-use-occ_search-to-query-gbif." data-scrolling="true" href="#we-use-occ_search-to-query-gbif." aria-controls="we-use-occ_search-to-query-gbif." aria-selected="false"><span class="nav-link-text">We use occ_search() to query GBIF.</span></a></li><li class="nav-item" role="presentation"><a id="tab-iterar-sobre-cada-datasetkey-para-obtener-sus-metadatos." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#iterar-sobre-cada-datasetkey-para-obtener-sus-metadatos." data-scrolling="true" href="#iterar-sobre-cada-datasetkey-para-obtener-sus-metadatos." aria-controls="iterar-sobre-cada-datasetkey-para-obtener-sus-metadatos." aria-selected="false"><span class="nav-link-text">2. Iterar sobre cada ‘datasetKey’ para obtener sus metadatos.</span></a></li><li class="nav-item" role="presentation"><a id="tab-iterate-over-each-datasetkey-to-get-its-metadata." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#iterate-over-each-datasetkey-to-get-its-metadata." data-scrolling="true" href="#iterate-over-each-datasetkey-to-get-its-metadata." aria-controls="iterate-over-each-datasetkey-to-get-its-metadata." aria-selected="false"><span class="nav-link-text">2. Iterate over each ‘datasetKey’ to get its metadata.</span></a></li><li class="nav-item" role="presentation"><a id="tab-map_dfr-crea-una-única-tabla-data-frame-combinando-los-resultados-de-cada-iteración." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#map_dfr-crea-una-única-tabla-data-frame-combinando-los-resultados-de-cada-iteración." data-scrolling="true" href="#map_dfr-crea-una-única-tabla-data-frame-combinando-los-resultados-de-cada-iteración." aria-controls="map_dfr-crea-una-única-tabla-data-frame-combinando-los-resultados-de-cada-iteración." aria-selected="false"><span class="nav-link-text">‘map_dfr’ crea una única tabla (data frame) combinando los resultados de cada iteración.</span></a></li><li class="nav-item" role="presentation"><a id="tab-map_dfr-creates-a-single-data-frame-by-row-binding-the-results-of-each-iteration." class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#map_dfr-creates-a-single-data-frame-by-row-binding-the-results-of-each-iteration." data-scrolling="true" href="#map_dfr-creates-a-single-data-frame-by-row-binding-the-results-of-each-iteration." aria-controls="map_dfr-creates-a-single-data-frame-by-row-binding-the-results-of-each-iteration." aria-selected="false"><span class="nav-link-text">‘map_dfr’ creates a single data frame by row-binding the results of each iteration.</span></a></li><li class="nav-item" role="presentation"><a id="tab-procesamiento-de-datos" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#procesamiento-de-datos" data-scrolling="true" href="#procesamiento-de-datos" aria-controls="procesamiento-de-datos" aria-selected="false"><span class="nav-link-text">— PROCESAMIENTO DE DATOS —</span></a></li><li class="nav-item" role="presentation"><a id="tab-data-processing" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#data-processing" data-scrolling="true" href="#data-processing" aria-controls="data-processing" aria-selected="false"><span class="nav-link-text">— DATA PROCESSING —</span></a></li><li class="nav-item" role="presentation"><a id="tab-contar-datasets-por-año-de-creación-y-tipo" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#contar-datasets-por-año-de-creación-y-tipo" data-scrolling="true" href="#contar-datasets-por-año-de-creación-y-tipo" aria-controls="contar-datasets-por-año-de-creación-y-tipo" aria-selected="false"><span class="nav-link-text">Contar datasets por año de creación y tipo</span></a></li><li class="nav-item" role="presentation"><a id="tab-count-datasets-by-creation-year-and-type" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#count-datasets-by-creation-year-and-type" data-scrolling="true" href="#count-datasets-by-creation-year-and-type" aria-controls="count-datasets-by-creation-year-and-type" aria-selected="false"><span class="nav-link-text">Count datasets by creation year and type</span></a></li><li class="nav-item" role="presentation"><a id="tab-calcular-el-total-acumulativo-de-datasets-por-año" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#calcular-el-total-acumulativo-de-datasets-por-año" data-scrolling="true" href="#calcular-el-total-acumulativo-de-datasets-por-año" aria-controls="calcular-el-total-acumulativo-de-datasets-por-año" aria-selected="false"><span class="nav-link-text">Calcular el total acumulativo de datasets por año</span></a></li><li class="nav-item" role="presentation"><a id="tab-calculate-the-cumulative-total-of-datasets-per-year" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#calculate-the-cumulative-total-of-datasets-per-year" data-scrolling="true" href="#calculate-the-cumulative-total-of-datasets-per-year" aria-controls="calculate-the-cumulative-total-of-datasets-per-year" aria-selected="false"><span class="nav-link-text">Calculate the cumulative total of datasets per year</span></a></li><li class="nav-item" role="presentation"><a id="tab-contar-datasets-por-año-de-modificación-y-tipo" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#contar-datasets-por-año-de-modificación-y-tipo" data-scrolling="true" href="#contar-datasets-por-año-de-modificación-y-tipo" aria-controls="contar-datasets-por-año-de-modificación-y-tipo" aria-selected="false"><span class="nav-link-text">Contar datasets por año de modificación y tipo</span></a></li><li class="nav-item" role="presentation"><a id="tab-count-datasets-by-modification-year-and-type" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#count-datasets-by-modification-year-and-type" data-scrolling="true" href="#count-datasets-by-modification-year-and-type" aria-controls="count-datasets-by-modification-year-and-type" aria-selected="false"><span class="nav-link-text">Count datasets by modification year and type</span></a></li><li class="nav-item" role="presentation"><a id="tab-sumar-el-número-de-registros-occurrences-por-año-de-creación-del-dataset" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#sumar-el-número-de-registros-occurrences-por-año-de-creación-del-dataset" data-scrolling="true" href="#sumar-el-número-de-registros-occurrences-por-año-de-creación-del-dataset" aria-controls="sumar-el-número-de-registros-occurrences-por-año-de-creación-del-dataset" aria-selected="false"><span class="nav-link-text">Sumar el número de registros (occurrences) por año de creación del dataset</span></a></li><li class="nav-item" role="presentation"><a id="tab-sum-the-number-of-records-occurrences-by-the-datasets-creation-year" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#sum-the-number-of-records-occurrences-by-the-datasets-creation-year" data-scrolling="true" href="#sum-the-number-of-records-occurrences-by-the-datasets-creation-year" aria-controls="sum-the-number-of-records-occurrences-by-the-datasets-creation-year" aria-selected="false"><span class="nav-link-text">Sum the number of records (occurrences) by the dataset’s creation year</span></a></li><li class="nav-item" role="presentation"><a id="tab-contar-el-número-de-datasets-por-tipo-de-licencia" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#contar-el-número-de-datasets-por-tipo-de-licencia" data-scrolling="true" href="#contar-el-número-de-datasets-por-tipo-de-licencia" aria-controls="contar-el-número-de-datasets-por-tipo-de-licencia" aria-selected="false"><span class="nav-link-text">Contar el número de datasets por tipo de licencia</span></a></li><li class="nav-item" role="presentation"><a id="tab-count-the-number-of-datasets-by-license-type" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#count-the-number-of-datasets-by-license-type" data-scrolling="true" href="#count-the-number-of-datasets-by-license-type" aria-controls="count-the-number-of-datasets-by-license-type" aria-selected="false"><span class="nav-link-text">Count the number of datasets by license type</span></a></li><li class="nav-item" role="presentation"><a id="tab-carga-de-datos-de-citaciones" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#carga-de-datos-de-citaciones" data-scrolling="true" href="#carga-de-datos-de-citaciones" aria-controls="carga-de-datos-de-citaciones" aria-selected="false"><span class="nav-link-text">— CARGA DE DATOS DE CITACIONES —</span></a></li><li class="nav-item" role="presentation"><a id="tab-citation-data-loading" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#citation-data-loading" data-scrolling="true" href="#citation-data-loading" aria-controls="citation-data-loading" aria-selected="false"><span class="nav-link-text">— CITATION DATA LOADING —</span></a></li><li class="nav-item" role="presentation"><a id="tab-url-de-la-api-de-gbif-para-buscar-literatura-científica" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#url-de-la-api-de-gbif-para-buscar-literatura-científica" data-scrolling="true" href="#url-de-la-api-de-gbif-para-buscar-literatura-científica" aria-controls="url-de-la-api-de-gbif-para-buscar-literatura-científica" aria-selected="false"><span class="nav-link-text">URL de la API de GBIF para buscar literatura científica</span></a></li><li class="nav-item" role="presentation"><a id="tab-gbif-api-url-to-search-for-scientific-literature" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#gbif-api-url-to-search-for-scientific-literature" data-scrolling="true" href="#gbif-api-url-to-search-for-scientific-literature" aria-controls="gbif-api-url-to-search-for-scientific-literature" aria-selected="false"><span class="nav-link-text">GBIF API URL to search for scientific literature</span></a></li><li class="nav-item" role="presentation"><a id="tab-actualizada-para-buscar-artículos-que-citen-datos-de-gbif-y-mencionen-ecuador" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#actualizada-para-buscar-artículos-que-citen-datos-de-gbif-y-mencionen-ecuador" data-scrolling="true" href="#actualizada-para-buscar-artículos-que-citen-datos-de-gbif-y-mencionen-ecuador" aria-controls="actualizada-para-buscar-artículos-que-citen-datos-de-gbif-y-mencionen-ecuador" aria-selected="false"><span class="nav-link-text">Actualizada para buscar artículos que citen datos de GBIF y mencionen “Ecuador”</span></a></li><li class="nav-item" role="presentation"><a id="tab-updated-to-search-for-articles-citing-gbif-data-and-mentioning-ecuador" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#updated-to-search-for-articles-citing-gbif-data-and-mentioning-ecuador" data-scrolling="true" href="#updated-to-search-for-articles-citing-gbif-data-and-mentioning-ecuador" aria-controls="updated-to-search-for-articles-citing-gbif-data-and-mentioning-ecuador" aria-selected="false"><span class="nav-link-text">Updated to search for articles citing GBIF data and mentioning “Ecuador”</span></a></li><li class="nav-item" role="presentation"><a id="tab-hacer-la-llamada-a-la-api" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#hacer-la-llamada-a-la-api" data-scrolling="true" href="#hacer-la-llamada-a-la-api" aria-controls="hacer-la-llamada-a-la-api" aria-selected="false"><span class="nav-link-text">Hacer la llamada a la API</span></a></li><li class="nav-item" role="presentation"><a id="tab-make-the-api-call" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#make-the-api-call" data-scrolling="true" href="#make-the-api-call" aria-controls="make-the-api-call" aria-selected="false"><span class="nav-link-text">Make the API call</span></a></li><li class="nav-item" role="presentation"><a id="tab-procesar-la-respuesta-json" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#procesar-la-respuesta-json" data-scrolling="true" href="#procesar-la-respuesta-json" aria-controls="procesar-la-respuesta-json" aria-selected="false"><span class="nav-link-text">Procesar la respuesta JSON</span></a></li><li class="nav-item" role="presentation"><a id="tab-process-the-json-response" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#process-the-json-response" data-scrolling="true" href="#process-the-json-response" aria-controls="process-the-json-response" aria-selected="false"><span class="nav-link-text">Process the JSON response</span></a></li><li class="nav-item" role="presentation"><a id="tab-extraer-los-conteos-de-citaciones-por-año" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#extraer-los-conteos-de-citaciones-por-año" data-scrolling="true" href="#extraer-los-conteos-de-citaciones-por-año" aria-controls="extraer-los-conteos-de-citaciones-por-año" aria-selected="false"><span class="nav-link-text">Extraer los conteos de citaciones por año</span></a></li><li class="nav-item" role="presentation"><a id="tab-extract-citation-counts-per-year" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#extract-citation-counts-per-year" data-scrolling="true" href="#extract-citation-counts-per-year" aria-controls="extract-citation-counts-per-year" aria-selected="false"><span class="nav-link-text">Extract citation counts per year</span></a></li><li class="nav-item" role="presentation"><a id="tab-paleta-de-colores-de-viridis" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#paleta-de-colores-de-viridis" data-scrolling="true" href="#paleta-de-colores-de-viridis" aria-controls="paleta-de-colores-de-viridis" aria-selected="false"><span class="nav-link-text">Paleta de colores de Viridis</span></a></li><li class="nav-item" role="presentation"><a id="tab-viridis-color-palette" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#viridis-color-palette" data-scrolling="true" href="#viridis-color-palette" aria-controls="viridis-color-palette" aria-selected="false"><span class="nav-link-text">Viridis color palette</span></a></li></ul></div></div>
</nav>
</header>
<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-layout-custom quarto-dashboard-content bslib-gap-spacing html-fill-container dashboard-scrolling quarto-dashboard-pages">
<!-- sidebar -->
<!-- margin-sidebar -->
<!-- main -->

<div class="bslib-grid-item html-fill-item tab-content bslib-grid" data-layout="flow" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div id="bloque-de-configuración" class="dashboard-page tab-pane show active html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-bloque-de-configuración">

</div>
<div id="setup-chunk" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-setup-chunk">

</div>
<div id="carga-de-todas-las-librerías-de-r-necesarias." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-carga-de-todas-las-librerías-de-r-necesarias.">

</div>
<div id="load-all-necessary-r-libraries." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-load-all-necessary-r-libraries.">

</div>
<div id="include-false-significa-que-este-bloque-no-se-mostrará-en-la-web." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-include-false-significa-que-este-bloque-no-se-mostrará-en-la-web.">

</div>
<div id="include-false-means-this-chunk-will-not-be-shown-on-the-website." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-include-false-means-this-chunk-will-not-be-shown-on-the-website.">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>library(tidyverse) # Para manipulación de datos (dplyr, purrr, etc.) / # For data manipulation (dplyr, purrr, etc.) library(plotly) # Para gráficos interactivos / # For interactive charts library(here) # Para rutas de archivos relativas / # For relative file paths library(viridis) # Para paletas de colores / # For color palettes library(httr) # Para hacer llamadas a la API (GET) / # For making API calls (GET) library(jsonlite) # Para procesar datos JSON de la API / # For processing JSON data from the API library(rgbif) # Para interactuar con la API de GBIF (¡añadido!) / # For interacting with the GBIF API (added!) library(lubridate) # Para manejar fechas fácilmente / # For easy date handling</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="carga-la-función-de-ayuda-get_created_modified-desde-el-archivo-rhelpers.r" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-carga-la-función-de-ayuda-get_created_modified-desde-el-archivo-rhelpers.r">

</div>
<div id="load-the-helper-function-get_created_modified-from-the-rhelpers.r-file" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-load-the-helper-function-get_created_modified-from-the-rhelpers.r-file">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>source(here(“R”, “helpers.R”))</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="carga-de-datos-de-datasets" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-carga-de-datos-de-datasets">

</div>
<div id="dataset-data-loading" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-dataset-data-loading">

</div>
<div id="obtener-todas-las-datasetkey-ids-de-datasets-que-tienen-registros-en-ecuador." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-obtener-todas-las-datasetkey-ids-de-datasets-que-tienen-registros-en-ecuador.">

</div>
<div id="get-all-datasetkey-dataset-ids-that-have-records-in-ecuador." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-get-all-datasetkey-dataset-ids-that-have-records-in-ecuador.">

</div>
<div id="usamos-occ_search-para-buscar-en-gbif." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-usamos-occ_search-para-buscar-en-gbif.">

</div>
<div id="we-use-occ_search-to-query-gbif." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-we-use-occ_search-to-query-gbif.">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>ecuador_dataset_keys &lt;- occ_search( country = “EC”, # Código ISO de 2 letras para Ecuador / # 2-letter ISO code for Ecuador limit = 0, # No queremos los registros, solo la lista de datasets / # We don’t want records, just the dataset list facet = “datasetKey”,# Agrupar los resultados por dataset / # Group results by dataset facetLimit = 10000 # Límite máximo de datasets a recuperar / # Maximum limit of datasets to retrieve )<span class="math inline">\(facets\)</span>datasetKey$name</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="iterar-sobre-cada-datasetkey-para-obtener-sus-metadatos." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-iterar-sobre-cada-datasetkey-para-obtener-sus-metadatos.">

</div>
<div id="iterate-over-each-datasetkey-to-get-its-metadata." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-iterate-over-each-datasetkey-to-get-its-metadata.">

</div>
<div id="map_dfr-crea-una-única-tabla-data-frame-combinando-los-resultados-de-cada-iteración." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-map_dfr-crea-una-única-tabla-data-frame-combinando-los-resultados-de-cada-iteración.">

</div>
<div id="map_dfr-creates-a-single-data-frame-by-row-binding-the-results-of-each-iteration." class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-map_dfr-creates-a-single-data-frame-by-row-binding-the-results-of-each-iteration.">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>datasets &lt;- ecuador_dataset_keys %&gt;% map_dfr(~{</p>
<pre><code># '.x' es el 'datasetKey' actual en el bucle
# '.x' is the current 'datasetKey' in the loop
current_key &lt;- .x 

# Imprime en el log de la Action (para debugging)
# Print to the Action log (for debugging)
print(paste("Procesando dataset / Processing dataset:", current_key)) 

# A. Obtener metadatos base (tipo, licencia)
# A. Get base metadata (type, license)
meta &lt;- rgbif::dataset_get(current_key)

# B. Obtener fechas de creación/modificación (usando la función de R/helpers.R)
# B. Get created/modified dates (using the function from R/helpers.R)
date_info &lt;- get_created_modified(current_key) 

# C. Construir una fila (tibble) con toda la información necesaria.
# C. Build a single row (tibble) with all necessary information.
# Esto es robusto y asegura que todas las columnas existan.
# This is robust and ensures all columns exist.
tibble(
  dataset_key = meta$data$key,
  type = meta$data$type,
  license = meta$data$license,
  # Usar %||% 0 para asignar 0 si 'occurrenceCount' es NULL (evita errores)
  # Use %||% 0 to assign 0 if 'occurrenceCount' is NULL (prevents errors)
  occurrence_records_count = meta$data$occurrenceCount %||% 0,
  created = date_info$created,
  modified = date_info$modified
)</code></pre>
<p>}) %&gt;% # 3. Procesar las fechas # 3. Process the dates # Esto ahora funciona porque ‘created’ y ‘modified’ fueron añadidas en el paso anterior. # This now works because ‘created’ and ‘modified’ were added in the previous step. mutate( created_date = as_date(created), created_year = year(created_date), modified_date = as_date(modified), modified_year = year(modified_date) )</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="procesamiento-de-datos" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-procesamiento-de-datos">

</div>
<div id="data-processing" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-data-processing">

</div>
<div id="contar-datasets-por-año-de-creación-y-tipo" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-contar-datasets-por-año-de-creación-y-tipo">

</div>
<div id="count-datasets-by-creation-year-and-type" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-count-datasets-by-creation-year-and-type">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>created_datasets_counts &lt;- datasets %&gt;% group_by(created_year, type) %&gt;% summarise(count = n(), .groups = “drop”)</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="calcular-el-total-acumulativo-de-datasets-por-año" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-calcular-el-total-acumulativo-de-datasets-por-año">

</div>
<div id="calculate-the-cumulative-total-of-datasets-per-year" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-calculate-the-cumulative-total-of-datasets-per-year">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>cumulative_created_datasets &lt;- created_datasets_counts %&gt;% group_by(created_year) %&gt;% summarise(yearly_total = sum(count)) %&gt;% arrange(created_year) %&gt;% mutate(cumulative_total = cumsum(yearly_total)) # Suma acumulativa / # Cumulative sum</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="contar-datasets-por-año-de-modificación-y-tipo" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-contar-datasets-por-año-de-modificación-y-tipo">

</div>
<div id="count-datasets-by-modification-year-and-type" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-count-datasets-by-modification-year-and-type">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>modified_datasets_counts &lt;- datasets %&gt;% group_by(modified_year, type) %&gt;% summarise(count = n(), .groups = “drop”)</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="sumar-el-número-de-registros-occurrences-por-año-de-creación-del-dataset" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-sumar-el-número-de-registros-occurrences-por-año-de-creación-del-dataset">

</div>
<div id="sum-the-number-of-records-occurrences-by-the-datasets-creation-year" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-sum-the-number-of-records-occurrences-by-the-datasets-creation-year">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>records_per_year &lt;- datasets %&gt;% group_by(created_year) %&gt;% summarise(total_occurrence_records = sum(occurrence_records_count, na.rm = TRUE)) %&gt;% arrange(created_year) %&gt;% mutate(cumulative_occ = cumsum(total_occurrence_records)) # Suma acumulativa / # Cumulative sum</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="contar-el-número-de-datasets-por-tipo-de-licencia" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-contar-el-número-de-datasets-por-tipo-de-licencia">

</div>
<div id="count-the-number-of-datasets-by-license-type" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-count-the-number-of-datasets-by-license-type">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>license_counts &lt;- datasets %&gt;% count(license, name = “count”)</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="carga-de-datos-de-citaciones" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-carga-de-datos-de-citaciones">

</div>
<div id="citation-data-loading" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-citation-data-loading">

</div>
<div id="url-de-la-api-de-gbif-para-buscar-literatura-científica" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-url-de-la-api-de-gbif-para-buscar-literatura-científica">

</div>
<div id="gbif-api-url-to-search-for-scientific-literature" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-gbif-api-url-to-search-for-scientific-literature">

</div>
<div id="actualizada-para-buscar-artículos-que-citen-datos-de-gbif-y-mencionen-ecuador" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-actualizada-para-buscar-artículos-que-citen-datos-de-gbif-y-mencionen-ecuador">

</div>
<div id="updated-to-search-for-articles-citing-gbif-data-and-mentioning-ecuador" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-updated-to-search-for-articles-citing-gbif-data-and-mentioning-ecuador">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>citation_url &lt;- “<a href="https://api.gbif.org/v1/literature/search?q=Ecuador&amp;relevance=GBIF_USED&amp;facet=year">https://api.gbif.org/v1/literature/search?q=Ecuador&amp;relevance=GBIF_USED&amp;facet=year</a>”</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="hacer-la-llamada-a-la-api" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-hacer-la-llamada-a-la-api">

</div>
<div id="make-the-api-call" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-make-the-api-call">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>response &lt;- GET(citation_url) stop_for_status(response) # Detener si la API da un error / # Stop if the API returns an error</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="procesar-la-respuesta-json" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-procesar-la-respuesta-json">

</div>
<div id="process-the-json-response" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-process-the-json-response">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>citation_json_data &lt;- content(response, “text”, encoding = “UTF-8”) %&gt;% fromJSON(flatten = TRUE)</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="extraer-los-conteos-de-citaciones-por-año" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-extraer-los-conteos-de-citaciones-por-año">

</div>
<div id="extract-citation-counts-per-year" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-extract-citation-counts-per-year">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>citation_per_year &lt;- citation_json_data<span class="math inline">\(facets\)</span>counts[[1]] %&gt;% as_tibble() %&gt;% rename(year = name) %&gt;% mutate( year = as.integer(year), count = as.integer(count) ) %&gt;% arrange(year) %&gt;% # Asegurar orden ascendente / # Ensure ascending order mutate(cumulative_count = cumsum(count)) # Suma acumulativa / # Cumulative sum</p>
<p>#| title: Número de Registros de Ocurrencia Publicados por Año #| title: Number of Occurrence Records Published per Year # Este gráfico muestra cuántos registros (total_occurrence_records) # se publicaron cada año, basado en el año de creación del dataset. # This chart shows how many records (total_occurrence_records) # were published each year, based on the dataset’s creation year.</p>
<p>cumulative_color &lt;- “#F8760D” # Color para la línea acumulativa / # Color for the cumulative line</p>
<p>fig &lt;- plot_ly() %&gt;%</p>
<p># Gráfico de barras: Registros por año # Bar chart: Records per year add_bars( data = records_per_year, x = ~created_year, y = ~total_occurrence_records, name = “Registros por año / Records per year”, marker = list(color = “#21908CFF”) ) %&gt;%</p>
<p># Línea: Total acumulativo # Line: Cumulative Total add_lines( data = records_per_year, x = ~created_year, y = ~cumulative_occ, name = “Total Acumulativo / Cumulative Total”, yaxis = “y2”, # Usar el eje Y secundario (derecha) / # Use secondary Y-axis (right) line = list(color = cumulative_color, width = 2) ) %&gt;%</p>
<p># Configuración de los ejes # Layout and axes configuration layout( xaxis = list(title = “Año / Year”), yaxis = list( title = “Registros por Año (log) / Records per Year (log)”, type = “log”, # Escala logarítmica / # Logarithmic scale rangemode = “nonnegative” ), yaxis2 = list( overlaying = “y”, side = “right”, type = “log”, title = list(text = “Total Acumulativo (log) / Cumulative Total (log)”), rangemode = “nonnegative” ), margin = list(r = 80), legend = list(x = 0.05, y = 0.95) )</p>
fig
<p>#| title: Número de Datasets Publicados por Año #| title: Number of Datasets Published per Year # Gráfico de barras apiladas que muestra cuántos datasets # de cada tipo (type) se publicaron por año. # Stacked bar chart showing how many datasets # of each type were published per year.</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
<div id="paleta-de-colores-de-viridis" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-paleta-de-colores-de-viridis">

</div>
<div id="viridis-color-palette" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="rows" aria-labelledby="tab-viridis-color-palette">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, max-content); grid-auto-columns: minmax(0, 1fr);">
<div class="card html-fill-item html-fill-container bslib-card" data-fill="false" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-body html-fill-item html-fill-container">
<p>n_colors &lt;- length(unique(created_datasets_counts$type)) cb_palette &lt;- viridis(n_colors)</p>
<p>fig &lt;- plot_ly() %&gt;%</p>
<p># Barras apiladas (stack) # Stacked bars add_bars( data = created_datasets_counts, x = ~created_year, y = ~count, color = ~type, colors = cb_palette, name = ~type ) %&gt;%</p>
<p># Línea acumulativa # Cumulative line add_lines( data = cumulative_created_datasets, x = ~created_year, y = ~cumulative_total, name = “Total Acumulativo / Cumulative Total”, yaxis = “y2”, # Eje Y secundario / # Secondary Y-axis line = list(color = “#F8760DFF”, width = 2) ) %&gt;%</p>
<p>layout( barmode = “stack”, # Apilar las barras / # Stack the bars xaxis = list(title = “Año / Year”), yaxis = list(title = “Número de Datasets / Number of Datasets”), yaxis2 = list( overlaying = “y”, side = “right”, title = “Total Acumulativo / Cumulative Total” ), margin = list(r = 80), legend = list(x = 0.02, y = 1) )</p>
fig
<p>#| title: Citaciones de Datasets Publicados (GBIF) por Año #| title: Citations of Published Datasets (GBIF) per Year # Gráfico de barras que muestra cuántos artículos científicos # han citado datasets de GBIF relacionados con Ecuador. # Bar chart showing how many scientific articles # have cited GBIF datasets related to Ecuador.</p>
<p>cumulative_color &lt;- “#F8760D”</p>
<p>fig &lt;- plot_ly() %&gt;%</p>
<p># Barras: Citaciones por año # Bars: Citations per year add_bars( data = citation_per_year, x = ~year, y = ~count, name = “Citaciones por año / Citations per year”, marker = list(color = “#21908CFF”) ) %&gt;%</p>
<p># Línea: Total acumulativo # Line: Cumulative total add_lines( data = citation_per_year, x = ~year, y = ~cumulative_count, name = “Total Acumulativo / Cumulative Total”, yaxis = “y2”, line = list(color = cumulative_color, width = 2) ) %&gt;%</p>
<p>layout( xaxis = list(title = “Año / Year”), yaxis = list( title = “Número de Citaciones / Number of Citations”, rangemode = “nonnegative” ), yaxis2 = list( overlaying = “y”, side = “right”, title = list(text = “Total Acumulativo / Cumulative Total”), rangemode = “nonnegative” ), margin = list(r = 80), legend = list(x = 0.05, y = 0.95) )</p>
fig
<p>#| title: Distribución de Licencias de Datasets #| title: Distribution of Dataset Licenses # Gráfico de pastel (dona) que muestra el porcentaje # de cada tipo de licencia (CC-BY, CC0, etc.) # Pie (donut) chart showing the percentage # of each license type (CC-BY, CC0, etc.)</p>
<p>n_colors &lt;- length(unique(license_counts$license)) cb_palette &lt;- viridis(n_colors)</p>
<p>plot_ly( license_counts, labels = ~license, values = ~count, type = “pie”, hole = 0.4, # Agujero en el medio para hacerlo tipo dona / # Hole in the middle to make it a donut chart marker = list(colors = cb_palette) )</p>
<p>#| title: Número de Datasets Actualizados por Año #| title: Number of Datasets Updated per Year # Gráfico de barras apiladas que muestra cuántos datasets # fueron modificados/actualizados cada año. # Stacked bar chart showing how many datasets # were modified/updated each year.</p>
<p>n_colors &lt;- length(unique(modified_datasets_counts$type)) cb_palette &lt;- viridis(n_colors)</p>
<p>plot_ly( modified_datasets_counts, x = ~modified_year, y = ~count, color = ~type, colors = cb_palette, type = “bar” ) %&gt;% layout( barmode = “stack”, xaxis = list(title = “Año / Year”), yaxis = list(title = “Número de Datasets / Number of Datasets”), legend = list(x = 0.02, y = 1) )</p>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>


<div id="3ade8a4a-fb1d-4a6c-8409-ac45482d5fc9" class="hidden html-fill-item html-fill-container">

</div>
</div>
</div>
</div>


<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/vechocho\.github\.io\/publishing-activity-dashboard\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->

<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (_event) {
  if (window.bslib.Card) {
    window.bslib.Card.initializeAllCards();
  }
}); 
</script>
  



</body></html>